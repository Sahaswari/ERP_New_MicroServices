@using ERP_GraduateManagement.DTOs.Response
@using System.Net.Http.Json
@using MudBlazor


@if (_graduates.Count > 0)
{
    <MudDataGrid Items="_graduates" Filterable="true" Bordered="true" Dense="true">
        <Columns>
            <PropertyColumn Property="x => x.RegNo" Title="Registration Number" />
            <PropertyColumn Property="x => x.FullName" Title="Full Name" />
            <PropertyColumn Property="x => x.ContactNo" Title="Contact Number" />
            <PropertyColumn Property="x => x.Email" Title="Email" />
            <PropertyColumn Property="x => x.Degree" Title="Specilization" />
            <PropertyColumn Property="x => x.CurrentCompany" Title="Company" />
            <PropertyColumn Property="x => x.CurrentJobPosition" Title="Job Position" />
        </Columns>

        <PagerContent>
            <MudDataGridPager />
        </PagerContent>
    </MudDataGrid>

    <div style="margin-top: 20px;">

        <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Generate Report</MudButton>
    </div>
}
else
{
    <p>No Graduates to Show</p>
}


@code {

    private HttpClient Http = new HttpClient();

    private List<GetGraduateResponse> _graduates = new List<GetGraduateResponse>();


    protected override async Task OnInitializedAsync()
    {
        try
        {
            _graduates = await Http.GetFromJsonAsync<List<GetGraduateResponse>>("https://localhost:7010/api/Graduates/");
        }
        catch (Exception ex)
        {
            _graduates = null;
        }
    }

}
